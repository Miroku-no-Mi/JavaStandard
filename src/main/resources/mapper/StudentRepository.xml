<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="raisetech.student.management.repository.StudentRepository">

    <!-- 条件検索 -->
    <select id="searchByCondition"
            parameterType="raisetech.student.management.domain.StudentSearchCondition"
            resultType="raisetech.student.management.data.Student">

        SELECT
            id,
            name,
            kana_name AS kanaName,
            email,
            area,
            age,
            sex,
            remark,
            is_deleted AS isDeleted
        FROM students
        <where>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>

            <if test="age != null">
                AND age = #{age}
            </if>

            <if test="deleted != null">
                AND is_deleted = #{deleted}
            </if>
        </where>

    </select>

</mapper>
